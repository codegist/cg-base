<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../cg-behaviors/cg-application-error-listener-behavior.html">

<script>
    CG.BaseErrorListenerBehaviorImpl = {
        properties: {
            errors: {
                type: Array,
                value: []
            },
            typeFilter: {
                type: Array,
                value: []
            },
        },
        observers:[
            "errorsChanged(errors.splices)"
        ],
        _stripSource: function (k, v) {
            return k == "source" ? "source" : v;
        },
        onApplicationError: function (type, error) {
            console.log(this.toString(), "received error ", JSON.stringify(error, this._stripSource));
            if (this.typeFilter.length == 0 || this.typeFilter.indexOf(type) != -1) {
                this.splice("errors", 0, 0, error);
            }
        },
    };
    CG.BaseErrorListenerBehavior = [CG.ApplicationErrorListenerBehavior, CG.BaseErrorListenerBehaviorImpl]
</script>
